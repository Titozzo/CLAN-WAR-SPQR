<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Clan War</title>

<style>
body { font-family: Arial; background:#e5e9ee; padding:10px; }
.hidden { display:none; }

header {
  display:flex; justify-content:space-between;
  background:#2c3e50; color:white;
  padding:10px; border-radius:8px;
}

.clan {
  width:45%; display:flex; align-items:center; gap:10px;
}

.clan img { width:60px; height:60px; object-fit:cover; background:white; }

.controls, .login {
  text-align:center; margin:10px 0;
}

.row {
  display:flex; align-items:center;
  background:white; margin-top:5px;
  padding:5px; border-radius:6px;
}

.base { width:40%; }
.base img { width:70px; height:70px; object-fit:cover; display:block; }

.middle { width:20%; text-align:center; }

input, select, button { margin:3px; }
</style>
</head>

<body>

<div class="login">
  <h3>Login</h3>
  <input id="pass" type="password" placeholder="Password">
  <button onclick="login()">Login</button>
</div>

<div class="controls hidden" id="adminControls">
  War Size:
  <select id="size">
    <option>10</option><option>15</option><option>20</option>
    <option>25</option><option>30</option><option>35</option>
    <option>40</option><option>45</option><option>50</option>
  </select>
  <button onclick="createWar()">Start War</button>
</div>

<header>
  <div class="clan">
    <img id="ourLogo">
    <div>
      <input id="ourName" value="SPQR">
      <input type="file" onchange="loadImg(this,'ourLogo')">
    </div>
  </div>

  <div class="clan" style="justify-content:flex-end;">
    <div>
      <input id="enemyName" value="Enemy Clan">
      <input type="file" onchange="loadImg(this,'enemyLogo')">
    </div>
    <img id="enemyLogo">
  </div>
</header>

<div id="war"></div>

<script>
const ADMIN = "ILikeFeet";
const MEMBER = "ForzaLazio";
let role = "viewer";
let warSize = 0;

function login(){
  const p = document.getElementById("pass").value;
  if(p===ADMIN) role="admin";
  else if(p===MEMBER) role="member";
  document.querySelector(".login").classList.add("hidden");
  if(role==="admin") document.getElementById("adminControls").classList.remove("hidden");
}

function createWar(){
  warSize = document.getElementById("size").value;
  const w = document.getElementById("war");
  w.innerHTML = "";
  for(let i=1;i<=warSize;i++){
    w.innerHTML += row(i);
  }
}

function row(i){
  return `
  <div class="row">
    <div class="base">
      <b>#${i}</b><br>
      ${role==="admin"?`<input placeholder="Name"><input type="file" onchange="loadNext(this)">`:""}
      <img>
    </div>

    <div class="middle">
      attacks<br>
      <select ${role==="viewer"?"disabled":""}>
        ${targets()}
      </select>
    </div>

    <div class="base" style="text-align:right">
      <b>#${i}</b><br>
      ${role==="admin"?`<input placeholder="Name"><input type="file" onchange="loadNext(this)">`:""}
      <img>
    </div>
  </div>`;
}

function targets(){
  let t="";
  for(let i=1;i<=warSize;i++) t+=`<option>#${i}</option>`;
  return t;
}

function loadImg(i,id){
  document.getElementById(id).src=URL.createObjectURL(i.files[0]);
}
function loadNext(i){
  i.nextElementSibling.src=URL.createObjectURL(i.files[0]);
}
</script>

</body>
</html>
