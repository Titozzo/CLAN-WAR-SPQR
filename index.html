<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>SPQR Clan War</title>

<style>
body {
  font-family: Arial, sans-serif;
  background: #dfe6eb;
  padding: 15px;
}

#loginBox {
  text-align: center;
  margin-bottom: 10px;
}

button, select, input {
  padding: 5px;
  margin: 4px;
}

.admin-only {
  display: none;
}

.war-container {
  background: white;
  border-radius: 10px;
  overflow: hidden;
}

.header {
  display: flex;
  justify-content: space-between;
  padding: 12px;
  background: #2c3e50;
  color: white;
  align-items: center;
}

.clan-header {
  width: 45%;
  display: flex;
  align-items: center;
  gap: 10px;
}

.clan-header.right {
  justify-content: flex-end;
  text-align: right;
}

.clan-header img {
  width: 60px;
  height: 60px;
  object-fit: cover;
  background: white;
  border-radius: 6px;
}

.war-row {
  display: flex;
  align-items: center;
  border-top: 1px solid #ddd;
  padding: 8px;
}

.base {
  width: 40%;
}

.base.right {
  text-align: right;
}

.base img {
  width: 75px;
  height: 75px;
  object-fit: cover;
  border: 1px solid #ccc;
  margin-top: 5px;
}

.middle {
  width: 20%;
  text-align: center;
  font-weight: bold;
}
</style>
</head>

<body>

<div id="loginBox">
  <h3>Admin Login</h3>
  <input type="password" id="adminPass" placeholder="Admin password">
  <button onclick="login()">Login</button>
</div>

<div class="admin-only" style="text-align:center;">
  War Size:
  <select id="warSize">
    <option>10</option>
    <option>15</option>
    <option>20</option>
    <option>25</option>
    <option>30</option>
    <option>35</option>
    <option>40</option>
    <option>45</option>
    <option>50</option>
  </select>
  <button onclick="startWar()">Create War</button>
</div>

<div class="war-container">

  <!-- HEADERS -->
  <div class="header">
    <div class="clan-header">
      <img id="spqrLogo" style="display:none">
      <div>
        <strong>SPQR</strong><br>
        <span class="admin-only">
          Logo: <input type="file" accept="image/*" onchange="loadClanLogo(this,'spqrLogo')">
        </span>
      </div>
    </div>

    <div class="clan-header right">
      <div>
        <strong id="enemyName">Enemy Clan</strong><br>
        <span class="admin-only">
          Name:
          <input id="enemyNameInput" placeholder="Enemy name" oninput="updateEnemyName()"><br>
          Logo:
          <input type="file" accept="image/*" onchange="loadClanLogo(this,'enemyLogo')">
        </span>
      </div>
      <img id="enemyLogo" style="display:none">
    </div>
  </div>

  <!-- WAR MAP -->
  <div id="warMap"></div>

</div>

<script>
const ADMIN_PASSWORD = "CHANGE_THIS_PASSWORD"; // <- change this to your password
let isAdmin = false;
let warSize = 0;

function login() {
  if (document.getElementById("adminPass").value === ADMIN_PASSWORD) {
    isAdmin = true;
  }
  document.getElementById("loginBox").style.display = "none";
  toggleAdmin();
}

function toggleAdmin() {
  document.querySelectorAll(".admin-only").forEach(el => {
    el.style.display = isAdmin ? "block" : "none";
  });
}

function startWar() {
  warSize = parseInt(document.getElementById("warSize").value);
  const map = document.getElementById("warMap");
  map.innerHTML = "";

  for (let i = 1; i <= warSize; i++) {
    map.appendChild(createRow(i));
  }

  toggleAdmin();
}

function createRow(n) {
  const row = document.createElement("div");
  row.className = "war-row";

  row.innerHTML = `
    <div class="base">
      <strong>SPQR #${n}</strong>
      <div class="admin-only">
        <input placeholder="Name">
        <input type="file" accept="image/*" onchange="loadImage(this)">
      </div>
      <img style="display:none">
    </div>

    <div class="middle">
      attacks â†’
      <br>
      <select>${enemyOptions()}</select>
    </div>

    <div class="base right">
      <strong>Enemy #${n}</strong>
      <div class="admin-only">
        <input placeholder="Name">
        <input type="file" accept="image/*" onchange="loadImage(this)">
      </div>
      <img style="display:none">
    </div>
  `;

  return row;
}

function enemyOptions() {
  let o = "<option>-- target --</option>";
  for (let i = 1; i <= warSize; i++) o += `<option>Enemy #${i}</option>`;
  return o;
}

function loadImage(input) {
  const img = input.parentElement.nextElementSibling;
  img.src = URL.createObjectURL(input.files[0]);
  img.style.display = "block";
}

function loadClanLogo(input, id) {
  const img = document.getElementById(id);
  img.src = URL.createObjectURL(input.files[0]);
  img.style.display = "block";
}

function updateEnemyName() {
  document.getElementById("enemyName").textContent =
    document.getElementById("enemyNameInput").value || "Enemy Clan";
}
</script>

</body>
</html>
